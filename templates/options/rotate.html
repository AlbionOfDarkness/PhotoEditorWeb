<form method="post" action="/rotate">
    <div class="form-group">
        <label for="angle">Угол поворота (градусы):</label>
        <input type="number" name="angle" id="angle" step="0.1" required
               placeholder="Например: 45, -30, 90">
    </div>

    <div class="form-group">
        <label>Центр вращения:</label>
        <div class="center-options">
            <div>
                <input type="radio" name="center_type" value="auto" id="center_auto" checked>
                <label for="center_auto">Автоматически (центр изображения)</label>
            </div>
            <div>
                <input type="radio" name="center_type" value="custom" id="center_custom">
                <label for="center_custom">Указать вручную</label>
            </div>
        </div>
    </div>

    <div class="form-group" id="custom_center" style="display: none;">
        <div class="coord-inputs">
            <div>
                <label for="center_x">Координата X:</label>
                <input type="text" name="center_x" id="center_x"
                       placeholder="Абсолютная или относительная (0-1)">
            </div>
            <div>
                <label for="center_y">Координата Y:</label>
                <input type="text" name="center_y" id="center_y"
                       placeholder="Абсолютная или относительная (0-1)">
            </div>
        </div>
        <small>Можно указать абсолютные координаты (например: 100, 150) или относительные (например: 0.5, 0.5 - центр)</small>
    </div>

    <div class="form-group">
        <div class="checkbox-option">
            <input type="checkbox" name="keep_size" id="keep_size" checked>
            <label for="keep_size">Сохранить исходные размеры изображения</label>
        </div>
        <small>При включенной опции углы изображения могут обрезаться</small>
    </div>

    <button type="submit" class="btn-primary">Повернуть</button>
</form>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const centerAuto = document.getElementById('center_auto');
    const centerCustom = document.getElementById('center_custom');
    const customCenterDiv = document.getElementById('custom_center');

    function toggleCustomCenter() {
        if (centerCustom.checked) {
            customCenterDiv.style.display = 'block';
        } else {
            customCenterDiv.style.display = 'none';
        }
    }

    centerAuto.addEventListener('change', toggleCustomCenter);
    centerCustom.addEventListener('change', toggleCustomCenter);

    // Инициализация состояния
    toggleCustomCenter();
});
</script>

<style>
.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}

.center-options div {
    margin-bottom: 5px;
}

.coord-inputs {
    display: flex;
    gap: 15px;
    margin-top: 10px;
}

.coord-inputs > div {
    flex: 1;
}

.coord-inputs input {
    width: 100%;
    padding: 5px;
}

.checkbox-option {
    display: flex;
    align-items: center;
    gap: 8px;
}

.checkbox-option input[type="checkbox"] {
    margin: 0;
}

small {
    color: #666;
    font-size: 0.9em;
    display: block;
    margin-top: 5px;
}

button {
    padding: 10px 20px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

button:hover {
    background-color: #0056b3;
}
</style>